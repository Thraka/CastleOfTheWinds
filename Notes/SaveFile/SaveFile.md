Store headers
  Castle 1 has 10, Castle 2 has 12

  `12 0A` static, maybe store id?  Bjorn the Blacksmith
  `65 00 00 00`  changes on each save??
  `05 00` s2 Markup, can be changed to a negative number
  `00 00`
  `00 00 00 00` Unknown, but non-zero when the store's been visited


`12 10 65 00 00 00 04 00 00 00 00 00 00 00` Gunhild's General Store
`0D 0A 36 EA 26 00 00 00 00 00 00 00 00 00` Snori the Sage
`0D 06 3C E9 26 00 00 00 00 00 00 00 00 00` Olaf's Junk Store

Bjarnhaven stores

```
09 05 70 F1 26 00 05 00 00 00 00 00 00 00
09 09 32 F3 26 00 08 00 00 00 00 00 00 00
0C 04 43 EC 26 00 04 00 00 00 00 00 00 00
0D 08 0C F1 26 00 0A 00 00 00 00 00 00 00
06 0A 00 00 00 00 00 00 00 00 00 00 00 00
02 0A 00 00 00 00 00 00 00 00 00 00 00 00
```


# Maps in saves

Lower in the save file, you'll find maps.  Each seems to follow the 4 bytes `00 1C 00 00` like a delimiter.  I'm not sure that the significance of that is. 1C00h = 7168d, It's just 3 bits `0000 0000 0000 0000 0001 1100 0000 0000`

Map Id
`91 01`

Unknown
`00 00 00 00 00 00 00 00 00 00 00 00 00 00`

# Tile Data
Uses [Run Length Encoding](https://en.wikipedia.org/wiki/Run-length_encoding). Specifically, a series of Count/Data pairs making rows of 64 tiles.

`0A 05` 10 * 05 - Farmland
`02 04` 2 * 04  - Grass
`03 6D` 3 * 6D  - Hamlet Gate
`03 04` 3 * 04  - Grass
`09 05` 9 * 05  - Farmland
`25 00` 25 * 00 - Rock

The 25 rock are off the map for the Hamlet.  I'm not sure where this visible width of 27 is defined

The remaining rows:
```
0A 05 03 04 01 03 04 04 09 05 25 00
03 04 09 05 25 00
0A 05 03 04 01 03 04 04 09 05 25 00
0A 05 03 04 01 03 04 04 09 05 25 00
0A 05 03 04 01 03 04 04 09 05 25 00
0A 05 03 04 01 03 03 04 01 83 09 05 25 00
05 05 02 04 01 83 02 04 01 64 03 03 04 04 03 6E 06 05 25 00
05 05 03 6C 01 04 01 64 01 03 01 65 01 04 01 03 02 04 01 64 01 03 03 6E 06 05 25 00
05 05 03 6C 02 03 01 65 02 04 01 03 01 04 01 64 01 03 01 65 03 6E 06 05 25 00
05 05 03 6C 05 04 03 03 01 65 06 04 04 05 25 00
05 05 02 04 01 82 05 04 01 03 09 04 04 05 25 00
06 05 07 04 01 03 09 04 04 05 25 00
06 05 07 04 01 03 09 04 04 05 25 00
06 05 07 04 01 03 01 04 01 56 03 6A 04 04 04 05 25 00
06 05 03 04 02 6B 05 03 03 6A 04 04 04 05 25 00
06 05 03 04 02 6B 01 56 01 04 01 03 02 04 03 6A 04 04 04 05 25 00
06 05 07 04 01 03 09 04 04 05 25 00
06 05 07 04 01 03 09 04 04 05 25 00
06 05 02 04 03 67 01 56 03 03 01 56 03 69 01 04 07 05 25 00
06 05 02 04 03 67 02 03 01 81 02 03 03 69 01 04 07 05 25 00
06 05 02 04 03 67 01 04 03 03 01 04 03 69 01 04 07 05 25 00
06 05 07 04 01 03 06 04 07 05 25 00
06 05 07 04 01 03 01 56 05 04 07 05 25 00
08 05 03 04 05 68 01 04 0A 05 25 00
08 05 03 04 05 68 01 04 0A 05 25 00
08 05 03 04 05 68 01 04 0A 05 25 00
08 05 03 04 05 68 01 04 0A 05 25 00
08 05 03 04 05 68 01 04 0A 05 25 00
1B 05 FF 00
```



FF 00
FF 00
FF 00
FF 00
FF 00
FF 00
FF 00
FF 00 
2E 00 0D 06 01 07 FF 06 85 06 01 07 34 06 01 07 FF 06 83 06 01 07 05 06 01 07 FF 06 3A 06 01 07 05 06 01 07 FC 06 01 07 FF 06 73 06 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 09 00 0D 00 01 0D FF 00 85 00 01 0C 34 00 01 0B FF 00 48 00 01 02 3A 00 01 07 05 00 01 01 3A 00 01 08 BF 00 01 04 03 00 01 06 3A 00 01 03 05 00 01 05 BD 00 01 0A 3E 00 01 09 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 7C 00 00 00 7E 79 82 79 86 79 8A 79 8E 79 92 79 96 79 9A 79 9E 79 A2 79 A6 79 AA 79 AE 79 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 18 00 00 00 00 00 00 00 2C C7 02 00 00 00 00 00 0C 00 00 00 00 00 00 00 2C 73 02 00 00 00 00 00 10 00 00 00 00 00 00 00 2C 74 02 00 00 00 00 00 04 00 00 00 00 00 00 00 2C 4E 02 00 00 00 00 00 14 00 00 00 00 00 00 00 2C 09 04 00 00 00 00 00 20 6C 03 00 00 00 00 00 20 6C 03 00 00 00 00 00 1C 00 00
 

`F0 06 00 00 00 00 00 00 00 00 00 00 00 00 00 00`
 
03 0D 01 79 01 7E 06 0F 01 7E 05 0F 01 7B 06 0D 01 15 05 0D 01 7A 0D 0F 01 7B 03 0D 10 00 05 0D 01 79 04 7E 01 7B 01 0D 01 79 03 7E 01 7B 07 0D 01 03 05 0D 01 7F 0C 0F 01 80 04 0D 10 00 18 0D 01 03 05 0D 01 79 03 7E 04 0F 02 7E 03 0F 01 7B 04 0D 10 00 16 0D 01 7D 01 77 01 03 01 78 08 0D 01 79 02 7E 01 7B 02 0D 01 79 01 7E 01 7B 05 0D 10 00 12 0D 03 7D 01 77 02 04 01 03 01 04 01 78 02 7D 13 0D 10 00 0C 0D 05 7D 01 77 06 04 01 03 04 04 01 78 03 7D 0F 0D 10 00 0B 7D 01 77 0C 04 01 03 08 04 01 78 07 7D 07 0D 10 00 18 04 01 03 10 04 01 78 04 7D 02 0D 10 00 18 04 01 03 15 04 01 78 01 7D 10 00 18 04 01 03 17 04 10 00 18 04 01 03 17 04 10 00 18 04 01 03 17 04 10 00 18 04 01 03 17 04 10 00 18 04 01 03 17 04 10 00 18 04 01 03 17 04 10 00 18 04 01 03 17 04 10 00 18 04 01 03 17 04 10 00 18 04 01 03 17 04 10 00 18 04 01 03 17 04 10 00 18 04 01 03 17 04 10 00 18 04 01 03 17 04 10 00 18 04 01 03 17 04 10 00 01 03 2E 0E 01 03 10 00 01 03 2E 0E 01 03 10 00 17 04 01 64 01 03 01 65 16 04 10 00 16 04 01 64 01 03 01 65 17 04 10 00 15 04 01 64 01 03 01 65 17 04 01 05 10 00 14 04 01 64 01 03 01 65 18 04 01 05 10 00 13 04 01 64 01 03 01 65 19 04 01 05 10 00 12 04 01 64 01 03 01 65 16 04 01 9A 03 04 01 05 10 00 11 04 01 64 01 03 01 65 17 04 03 68 01 04 01 05 10 00 10 04 01 64 1A 03 03 68 01 04 01 05 10 00 0F 04 01 64 01 03 01 65 19 04 03 68 01 04 01 05 10 00 0E 04 01 64 01 03 01 65 1E 04 01 05 10 00 0D 04 01 64 01 03 01 65 19 04 07 05 10 00 0C 04 01 64 01 03 01 65 1A 04 07 05 10 00 07 05 04 04 01 64 01 03 01 65 1B 04 07 05 10 00 07 05 03 04 01 64 01 03 01 65 1C 04 07 05 10 00 07 05 03 04 01 03 01 65 03 04 09 05 11 04 07 05 10 00 07 05 02 04 03 67 03 04 09 05 18 04 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 16 00 18 06 01 07 FF 06 FF 06 FF 06 FF 06 FF 06 6C 06 01 07 2E 06 01 07 10 06 01 07 2E 06 01 07 28 06 01 07 FF 06 D2 06 01 07 FF 06 E0 06 01 07 35 06 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 06 00 18 00 01 01 FF 00 FF 00 FF 00 FF 00 FF 00 6C 00 01 03 2E 00 01 05 10 00 01 04 2E 00 01 06 28 00 01 02 FF 00 D2 00 01 07 FF 00 E0 00 01 08 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 3B 00 00 00 7E 79 82 79 86 79 8A 79 8E 79 92 79 96 79 9A 79 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 1C 00 00 00 00 00 00 00 34 D8 03 00 00 00 00 00 34 DD 03 00 00 00 00 00 34 DD 03 00 00 00 00 00 34 DD 03 00 00 00 00 00 34 DD 03 00 00 00 00 00 24 01 00 00 00 00 00 00 1C 00 00

`09 07 00 00 00 00 00 00 00 00 00 00 00 00 00 00`
D7 00 01 26 03 01 02 00 01 13 01 01 01 27 35 00 01 26 05 01 01 27 01 26 03 01 34 00 01 26 01 01 01 29 01 28 08 01 34 00 01 01 01 29 02 00 08 01 34 00 01 01 03 00 04 01 01 00 03 01 34 00 01 01 03 00 01 28 03 01 01 00 03 01 34 00 01 01 01 27 03 00 01 28 01 01 01 29 01 00 01 28 01 01 01 29 34 00 01 28 01 01 01 27 3E 00 01 28 01 01 3F 00 01 01 3F 00 01 01 3F 00 01 01 01 27 3E 00 01 28 01 01 01 27 3E 00 01 28 01 01 01 27 3E 00 01 28 01 01 36 00 01 26 02 01 01 27 05 00 01 01 07 00 01 26 02 01 01 27 2B 00 04 01 01 27 04 00 01 01 07 00 04 01 2B 00 05 01 04 00 01 01 07 00 04 01 2B 00 01 28 04 01 04 00 01 01 06 00 01 26 04 01 2C 00 01 01 07 00 01 01 03 00 01 26 07 01 2C 00 01 01 07 00 01 01 01 27 01 00 01 26 01 01 01 29 02 00 01 28 03 01 2C 00 01 01 07 00 01 28 01 01 01 26 01 01 01 29 05 00 02 01 2C 00 01 01 01 27 07 00 02 01 01 29 05 00 02 01 01 29 2C 00 01 28 01 01 01 27 06 00 01 01 37 00 01 28 01 01 06 00 01 01 38 00 01 01 06 00 01 01 38 00 01 01 01 27 04 00 01 26 01 01 38 00 01 28 01 01 01 27 03 00 01 01 01 29 39 00 01 28 01 01 01 27 02 00 01 01 3B 00 01 28 01 01 01 27 01 26 01 01 3C 00 01 28 02 01 01 29 3D 00 01 28 01 01 3F 00 01 01 3F 00 01 01 3F 00 01 01 3F 00 01 01 3F 00 01 03

FF 00
FF 00
FF 00
FF 00
FF 00
FF 00
2D 00
FF 00
FF 00
FF 00
FF 00
FF 00
FF 00
FF 00
FF 00
FF 00
A0 00 03 02 3D 00 01 02 01 07 01 02
FF 00 
FF 00 
FF 00 
FF 00 
FF 00 
FF 00 
2C 00 FF 00 1E 00 01 04 
FF 00 
FF 00 FF 00 B7 00 01 02 01 03 FF 00 50 00 01 05 3E 00 01 06 
FF 00 FF 00 FF 00 78 00 01 01 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 2D 00 00 00 

`7E 79` + 3 =>
`82 79` + 16 =>
`92 79` + 28 =>
`AE 79` + 16 =>
`BE 79` + 8 =>
`C6 79`

```
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 1C 00 00

Below the tile map bytes are creature structs.

Each creature has a type, and the byte for each type typically differs between castle1 and castle2.  They're listed in [../Creatures.md](../Creatures.md)
There's also a pair of positions like for the player with current and previous Y and X

00 00 86 79 00 00 00 00 00 00 00 00 00 00 00 00 00 80 00 00 88 13 00 00 C0 5D 00 00 FF FF FF FF FF FF FF FF 00 00 00 00 00 00 00 00 

!! This is a container!   it's 1 slot, holding leather armor  The location should be near the kobold at (13, 13), so I'm not sure where that's stored
01 00 01 00 
00 00 00 8A 79
07 01 E8 03 00 00 00 00 83 00 11 00 38 0C 00 00 06 00 00 00 00 00 8E 79 00 00 00 00 00 00

kobold at (13, 13)  
The 03 00 03 00 is probably it's hp and max hp  
01 07 03 00 03 00 3C 32 00 00 0E 00 00 00 09 07 00 00 01 00 01 FF 13 13 FF FF 00 00 8E 79 00 00 00 00 02 00 00 41 9A 79 00 00 00 00 00 00 

Goblin up at (1D, 04)  
01 06 04 00 04 00 32 32 A6 79 0E 00 00 00 09 07 00 00 01 00 01 FF 04 1D FF FF 00 00 9A 79 00 00 00 00 02 00 00 31 00 00 00 00 00 00 00 00 00 80 00 00 1F 00 00 00 1F 00 00 00 FF FF FF FF FF FF FF FF 00 00 00 00 00 00 00 00 

Our goblin's holding a pile of copper in its inventory (12 01).  9 bytes after the 09 is our amount (1fh = 31 pieces)  
01 00 01 00 00 00 00 AA 79 12 01 00 00 00 00 00 00 00 09 10 00 00 00 00 00 00 00 1F 00 00 00 BA 79 00 00 00 00 00 00 

I doubt the tail's really that long on its data, but I don't see a delimiter or another creature until we see a couple of rats, one at (23, 18), the other at (22, 19). Both have previous as (-1, -1), so they haven't moved yet.
0A 33 02 00 02 00 64 32 00 00 0E 00 00 00 09 07 00 00 01 00 01 FF 18 23 FF FF 00 00 BA 79 00 00 00 00 02 2A 00 21 C2 79 00 00 00 00 00 00
0A 33 02 00 02 00 64 32 00 00 0E 00 00 00 09 07 00 00 01 00 01 FF 19 22 FF FF 00 00 C2 79 00 00 00 00 02 2A 00 21 00 00 00 00 00 00 00 00 00 00

Changing the position of the creature doesn't move the creature in the game, but when the creature moves during a turn, it does move "from" the new position. This seems to break some map logic because the image of the creature is still in the old position.  There's probably a map object up in the tile data that's associated with the creature struct, and when the creature moves, it may remove the old tile object and place a new one. With the position being wrong in the creature data, it doesn't remove the old object.  The old object doesn't have any behavior, but it does still block movement.  It's like it becomes scenery.
```

# Notes

## Edit Save for exploring

Move Dagger named "123456789" in Free Hand
06 02 90 01 00 00 B2 8F 83 01 11 00 0D 0C 00 00 00 00 01 00 04 00 09 31 32 33 34 35 36 37 38 39

Replace in save with Wand of Scroll Map, 5000 charges
03 05 00 30 00 00 00 00 64 03 22 00 00 00 20 4E 00 00 00 00 00 00 3A 10 00 00 02 00 00 00 00 00

# Identified Spell Item bits
20 00 00 00 00 00 00 00 00 00 00 00 00 00 00 Base
20 00 00 10 00 00 00 00 00 00 00 00 00 00 00 + Scroll Shield
20 00 00 14 00 00 00 00 00 00 00 00 00 00 00 + Scroll Summon Monsters
20 00 00 14 01 00 00 00 00 00 00 00 00 00 00 + Scroll Detect Monsters
20 00 00 34 01 00 00 00 00 00 00 00 00 00 00 + Scroll Heal Minor Wounds
20 00 00 34 01 00 00 00 00 04 00 00 00 00 00 + Potion Heal Minor Wounds
22 00 00 34 01 00 00 00 00 04 00 00 00 00 00 + Wand Light
22 00 00 34 01 00 00 00 00 06 00 00 00 00 00 + Potion Levitation
22 00 00 34 01 00 00 00 00 26 00 00 00 00 00 + Potion Detect Objects
22 00 00 34 01 00 00 00 00 36 00 00 00 00 00 + Potion Detect Monsters
2A 00 00 34 01 00 00 00 00 36 00 00 00 00 00 + Wand Detect Objects
2A 00 00 34 01 00 00 00 00 37 00 00 00 00 00 + Water
2A 00 00 36 01 00 00 00 00 37 00 00 00 00 00 + Spell Book: Detect Monsters